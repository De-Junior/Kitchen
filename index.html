<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>What Can I Cook?</title>

  <style>
    :root {
      --primary: #ff7043;
      --primary-dark: #ff5722;
      --bg: #f9fafb;
      --card: #ffffff;
      --text: #333;
      --danger: #e53935;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: "Segoe UI", Tahoma, sans-serif;
      background: var(--bg);
      margin: 0;
      color: var(--text);
      line-height: 1.5;
    }

    /* Header */
    header {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      padding: 45px 20px;
      text-align: center;
    }

    header h1 {
      margin: 0;
      font-size: 2.6rem;
    }

    header p {
      opacity: 0.95;
      margin-top: 10px;
      font-size: 1.05rem;
    }

    /* Layout */
    .container {
      max-width: 1100px;
      margin: 40px auto;
      padding: 20px;
    }

    input {
      width: 100%;
      padding: 14px;
      font-size: 16px;
      border-radius: 8px;
      border: 2px solid #ddd;
      outline: none;
      transition: 0.25s;
    }

    input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(255,112,67,0.2);
    }

    button {
      margin-top: 15px;
      width: 100%;
      padding: 14px;
      font-size: 17px;
      font-weight: bold;
      background: var(--primary);
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 8px;
      transition: transform 0.2s, box-shadow 0.2s, background 0.2s;
    }

    button:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.15);
    }

    /* Recipes */
    .recipes {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 25px;
      margin-top: 40px;
    }

    .card {
      background: var(--card);
      border-radius: 14px;
      overflow: hidden;
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
      cursor: pointer;
      transition: transform 0.25s, box-shadow 0.25s;
    }

    .card:hover {
      transform: translateY(-6px);
      box-shadow: 0 18px 40px rgba(0,0,0,0.15);
    }

    .card img {
      width: 100%;
      height: 180px;
      object-fit: cover;
    }

    .card h3 {
      padding: 15px;
      font-size: 18px;
      text-align: center;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.75);
      z-index: 9999;
      padding: 20px;
      overflow-y: auto;
    }

    .modal-box {
      background: white;
      max-width: 700px;
      margin: 60px auto;
      padding: 25px 25px 30px;
      border-radius: 14px;
      position: relative;
      animation: slideUp 0.35s ease;
    }

    .modal-box h2 {
      margin-top: 0;
      color: var(--primary-dark);
    }

    .modal-box h3 {
      margin-bottom: 6px;
    }

    hr {
      margin: 20px 0;
      border: none;
      border-top: 1px solid #eee;
    }

    /* Close Button */
    .close-btn {
      position: absolute;
      top: 12px;
      right: 15px;
      width: 38px;
      height: 38px;
      border-radius: 50%;
      font-size: 22px;
      border: none;
      background: var(--danger);
      color: white;
      cursor: pointer;
      font-weight: bold;
      line-height: 1;
      transition: background 0.2s, transform 0.2s;
    }

    .close-btn:hover {
      background: #c62828;
      transform: scale(1.05);
    }

    /* Animation */
    @keyframes slideUp {
      from {
        transform: translateY(30px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    /* Mobile */
    @media (max-width: 600px) {
      header h1 {
        font-size: 2.1rem;
      }

      .modal-box {
        margin: 30px auto;
      }
    }
  </style>
</head>

<body>

<header>
  <h1>üç≥ Cook With James Junior</h1>
  <p>Enter ingredients you have and get recipes</p>
</header>

<div class="container">
  <input id="ingredients" placeholder="eggs, chicken, rice">
  <button onclick="searchRecipes()">Find Recipes</button>
  <div class="recipes" id="recipes"></div>
</div>

<script>
  const API_KEY = "88f44958d9764c53bc333c54ad07606a";

  async function searchRecipes() {
    const ingredientsInput = document.getElementById("ingredients").value;
    const recipesDiv = document.getElementById("recipes");

    if (!ingredientsInput) {
      alert("Please enter ingredients");
      return;
    }

    recipesDiv.innerHTML = "Loading recipes...";

    const url = `https://api.spoonacular.com/recipes/findByIngredients?ingredients=${encodeURIComponent(
      ingredientsInput
    )}&number=12&apiKey=${API_KEY}`;

    try {
      const response = await fetch(url);
      const data = await response.json();

      recipesDiv.innerHTML = "";

      data.forEach(recipe => {
        const used = recipe.usedIngredients.map(i => i.name);
        const missing = recipe.missedIngredients.map(i => i.name);

        const card = document.createElement("div");
        card.className = "card";

        card.innerHTML = `
          <img src="${recipe.image}">
          <h3>${recipe.title}</h3>
          <div style="padding: 0 15px 15px; font-size: 14px;">
            <p><strong>‚úÖ You have:</strong><br>${used.join(", ") || "None"}</p>
            <p style="color:#e53935;"><strong>‚ùå Missing:</strong><br>${missing.join(", ") || "Nothing üéâ"}</p>
          </div>
        `;

        card.onclick = () => getInstructions(recipe.id, recipe.title, used, missing);
        recipesDiv.appendChild(card);
      });

    } catch (error) {
      recipesDiv.innerHTML = "Error fetching recipes.";
      console.error(error);
    }
  }

  async function getInstructions(id, title, used, missing) {
    const modal = document.getElementById("modal");
    const modalTitle = document.getElementById("modalTitle");
    const modalContent = document.getElementById("modalContent");

    modalTitle.innerText = title;
    modal.style.display = "block";

    modalContent.innerHTML = `
      <h3>üß∫ Ingredients You Have</h3>
      <p>${used.join(", ") || "None"}</p>

      <h3 style="color:#e53935;">‚ùå Missing Ingredients</h3>
      <p>${missing.join(", ") || "Nothing üéâ"}</p>

      <hr>
      <h3>üë®‚Äçüç≥ Cooking Instructions</h3>
      <p>Loading instructions...</p>
    `;

    const url = `https://api.spoonacular.com/recipes/${id}/analyzedInstructions?apiKey=${API_KEY}`;

    try {
      const response = await fetch(url);
      const data = await response.json();

      if (!data.length || !data[0].steps.length) {
        modalContent.innerHTML += "<p>No instructions available.</p>";
        return;
      }

      let stepsHTML = "<ol>";
      data[0].steps.forEach(step => {
        stepsHTML += `<li>${step.step}</li>`;
      });
      stepsHTML += "</ol>";

      modalContent.innerHTML += stepsHTML;

    } catch (error) {
      modalContent.innerHTML += "<p>Error loading instructions.</p>";
      console.error(error);
    }
  }

  function closeModal() {
    document.getElementById("modal").style.display = "none";
  }
</script>

<div id="modal" class="modal">
  <div class="modal-box">
    <button class="close-btn" onclick="closeModal()">‚úñ</button>
    <h2 id="modalTitle"></h2>
    <div id="modalContent"></div>
  </div>
</div>

</body>
</html>
